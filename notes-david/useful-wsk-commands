# OpenWhisk wsk cli tool useful commands

## Create and update actions
$ wsk -i action create teste ../FaaS-GraalVM/target/app.zip --docker davidfrickert/dockerskeleton-slim
$ wsk -i action update teste ../FaaS-GraalVM/target/app.zip --docker davidfrickert/dockerskeleton-slim

# Photons
$ wsk -i action create sleep-photon sleep.jar --docker rfbpb/java8action -c 1

## Invoke action

### Only want result
$ wsk -i action invoke teste --result --param args '["reverseMe"]'

### Want more info (activation id and other stuff)
$ wsk -i action invoke teste --blocking --param args '["reverseMe"]'

## View logs of a function activation
$ wsk -i activation logs ACTIVATION_ID

## stop all functions
$ docker stop $(docker ps --filter name=wsk0* -aq) && docker rm $(docker ps --filter name=wsk0* -aq)

## measure cold start
wsk -i action invoke sleep-photon --blocking --param sleep '1000' | tail -n +2 | jq '.annotations[] | select(.key == "waitTime" or .key == "initTime").value' | awk '{sum+=$0} END{print sum}'
